---
layout: post
title:  C#, Lisp, Kotlin, Lua, Haskell, Objective-C
category: language 
---

* toc
{:toc}

# C#

## XmlReader

XmlReader是.NET中处理XML的类。之前的W3C已经提出了DOM和SAX两种模型。作为最早的模型，这两种模型在各种语言中都有相应的实现，关于它们的讨论也有很多，在此不再赘述。

XmlReader是一种快速、无缓冲、向前并只读的轻量级XML引擎，在这一点上它和SAX是相同的。它和SAX的主要区别在于它们的设计模式是不同的。SAX是push模式的XML引擎，它会在读到相应的节点时，触发消息并将之发送给调用程序。而XmlReader则是pull式的XML引擎，它更符合人们的通常的对文件顺序处理的习惯。当然除此之外，它还有其他的好处。参看MSDN的相关章节。

通常情况下，pull模型比push模型的效率高，但push模型的灵活性要高些。例如，Dos下的编程主要是一种顺序执行的pull模型结构，而Windows下的编程则是一种基于消息的push模型结构。所以，读取特定标签内容的XML文档，采用XmlReader比较好，而对于那些结构不固定或需要遍历的XML文档用SAX较好。

PS: XmlReader提出的pull方案，后来被libxml2采用，成为了GTK+的一部分。

## Microsoft.WindowsCE.Forms

这是一个Wince的类。由于.NET CF中的System.Windows.Forms.Form没有DefWndProc参数，所以要想接收窗体消息就要用到它。不过它的dll需要自己添（在.NET CF的安装路径下可以找到这个Microsoft.WindowsCE.Forms.dll），接收C++编程时的那些WM_开头的消息时需要用到这个模块中的MessageWindow类。

代码示例如下:

```c#
public class MsgWindow : MessageWindow
{
    public const int WM_CUSTOMMSG = 0x0400+3333;
    
    private Form1 msgform;//Form1是用于接收消息的那个窗体Form。
    public MsgWindow(Form1 msgform)
    {
        this.msgform = msgform;
    }
    protected override void WndProc(ref Message msg)
    {
        switch (msg.Msg)
        {
            case WM_CUSTOMMSG:
                //do sth
                break;
        }
        base.WndProc(ref msg);
    }
}
```

## C#中的发布功能

C#项目属性中有个publish标签是关于发布程序的功能的。用过Java的人都知道，Java的可移植性是很不错的，但Java程序的部署相对于一般 的本地程序来说就显得比较麻烦了。至少在本人的程序生涯中，就多次经历拿着JAR文件兴冲冲的跑去，却发现目标机没有JRE的情况。

C#中的发布功能除了能打包程序和.NET Framework之外，还有网络发布的功能。这里我主要讨论单机程序的打包。如果只有程序文件的话，情况比较简单，没什么难度。如果还有数据文件的话就 要注意了。在程序文件（Application Files）对话框中，每个文件有一个发布状态（Publish Status）的属性，如果你希望数据文件和程序文件在同一个文件夹下的话，最好选择包含（Include）而不是数据文件（Data File），后者会把你的数据文件部署到一个专门的数据文件夹下，这个文件夹可用 System.Deployment.Application.DataDirectory获得。

## Mono

.NET的跨平台一直不咋样，直到2014年MS推出的.NET core才有所改观。虽然.NET core可以开发C#应用，然而仅仅局限于非GUI的应用，所以目前更推荐使用Mono方案。

Mono早先是Xamarin推出的跨平台.NET替代项目，目前已经被MS收购，按照MS的路线图，Mono将作为非Windows平台的.NET方案而存在。它将和Windows平台的.NET方案共用.NET core的代码。

官网：

https://www.mono-project.com/

Mono有个IDE，叫做MonoDevelop。

官网：

https://www.monodevelop.com/

安装方面，尽管ubuntu的仓库已经有了Mono，但是却没有MonoDevelop，且该Mono版本与最新的MonoDevelop不兼容，因此还是老老实实采用官网的方案安装吧。

参考：

https://www.cnblogs.com/shanyou/p/4295163.html

.NET Core与.NET Framework、Mono之间的关系

https://www.cnblogs.com/wer-ltm/p/8776846.html#!comments

.NET：持续进化的统一开发平台

https://mp.weixin.qq.com/s/j5PFEkWd49SNKVdlWoqHiw

.NET Core很酷，你不得不知！

## gtksharp

安装：

`sudo apt install gtk-sharp3`

编译：

`mcs helloworld.cs -pkg:gtk-sharp-3.0`

https://www.mono-project.com/docs/gui/gtksharp/hello-world/

gtksharp

## NuGet

NuGet是C#项目的包管理工具，作用类似maven、pip。

官网：

https://www.nuget.org/

## 参考

https://www.zhihu.com/question/20451584

Java和C#最大的不同是什么？

https://blog.csdn.net/dodream/article/details/4719578

CLR、CLI、CTS、CLS的关系

https://www.zhihu.com/question/576573706

C#有方法可以直接编译成机器语言运行吗？（NativeAOT）

# Lisp & GUI

客观的说，目前开源领域并没有很好用的和Lisp配套的GUI工具集，几个开源实现要么完工度不高，要么过于古老，好几个的样式都是90年代中期的风格。

更有人指出，GUI基本上是OO语言的天下了，Lisp根本不适合干这个事。

不过事实的真相是：

1.最早的交互式GUI生成工具是用Lisp写的。没错，就是苹果乔教主旗下的Interface Builder，时间是1986年。

2.PTC公司的CAD系统是用Lisp和C++写的。

3.苹果公司早期使用MCL作为GUI开发语言（from 1984），因此那个时代有大量的程序是用Lisp写的。包括Mac上最早的MS Word。Objective-C是乔教主到NextStep之后的事，最初和苹果并无交集。

4.由于Mac在艺术家群体的流行。很多音乐软件是用Lisp写的，包括Open Music, PWGL, ScoreCleaner, Igor Engraver和Symbolic Composer等。

5.有家叫做LispWorks（From 1989）的公司提供对Lisp GUI的商业支持，而且提供的界面并不逊色于GTK、Qt等当代GUI工具集。上面提到的音乐软件基本上都是基于LispWorks的。

综上可见，Lisp开发GUI不是可能性的问题，而是一个有待重新发掘的问题。

# Kotlin

Kotlin是一门编程语言，由JetBrains公司开发，与Java 100%互通。

官网：

http://kotlinlang.org/

官网文档：

http://kotlinlang.org/docs/reference/android-overview.html

国内中文文档：

https://huanglizhuo.gitbooks.io/kotlin-in-chinese/content/

国内中文文档2：

http://www.liying-cn.net/kotlin/docs/reference/

国内中文文档3：

https://www.kotlincn.net/

官方示例：

https://github.com/Kotlin/kotlin-examples

# Lua

Lua的包管理工具叫做LuaRocks。官网：

https://luarocks.org/

参考：

https://mp.weixin.qq.com/s/nwhSDxz1Pu2JCU_IeMR9ww

Lua程序逆向之Luac文件格式分析

http://lua-users.org/wiki/GraphicalUserInterfaceToolkits

Lua的GUI工具列表

https://mp.weixin.qq.com/s/BFIBTkdHAy38FiNGiuLYbQ

深入理解Lua虚拟机

# Haskell

官网：

https://www.haskell.org/

Haskell主要有两套包管理系统cabal和stack，它们的仓库都是一样的，只是前端语法不同。stack相对比较新，也是目前的首选。

Haskell的官方仓库：

http://hackage.haskell.org/

清华镜像：

https://mirrors.tuna.tsinghua.edu.cn/help/hackage/

Haskell的安装有多种模式，推荐Stack模式，直接使用Stack安装所需要的依赖。

Stack的官网：

https://www.haskellstack.org/

然而国内访问不了，幸好有github：

https://github.com/commercialhaskell/stack/releases/

# Objective-C

## 环境搭建

PC上搭建Objective-C（以下简称OC）开发环境，主要借助GNUstep开源项目的成果。

以Ubuntu为例，步骤如下：

1.安装软件包。

`sudo apt install gnustep-devel libjpeg-dev libtiff5-dev gobjc-4.9`

2.设置环境变量。

`GNUSTEP_MAKEFILES=/usr/share/GNUstep/Makefiles`

# 俄乌战争+

乌萝的火车货运平台都是4轴的，标定载重有70顿，实际载重只有50左右，考虑到普遍超过百分之七十的折旧率可能数据会更低。因为不同轨距的关系连化缘都没办法，两个月前只有利沃夫那一段跟欧洲轨距同步了也换了6轴的货运平台。换种说法PZH2000就是乌萝的货运火车能够承受的极限，超过60吨的艾布拉姆斯是肯定上不了火车的。我记得PZH2000刚到乌萝那不久有一个负责车皮调度的哥们接受采访时说过他们为了把PZH2000运去哈尔科夫还特意准备了几节相对年轻的车皮，就这他们都还提心吊胆。

---

乌克兰sbu宣布抓获两名行走的五十万卢布。这两名五十万从俄罗斯博主获得宣传材料，支持俄罗斯入侵乌克兰。并使用数百个水军账户转发。真弱，相比3Q大战和华米大战双方调动的数百万水军，简直不值一提。

---

前几天，普京派人去美国求和的同时，在台湾海峡还对美国释放了善意，俄罗斯派出了一艘军舰在台湾海峡和南海进行“自由航行”，大打“台湾牌”。

---

芬兰向美国雷神公司提出采购3.8亿美元的毒刺订单，科威特直接向雷神公司下单30亿美元毒刺订单，某蛙下单了11亿美元.....等等。

英国向雷神下单3亿美元的标枪订单，立陶宛向雷神下单1.25亿美元的标枪订单，巴西向雷神下单222套标枪订单金额未透露，但是应该也是数亿美元......等等。

海马斯火箭炮更不必多说，立陶宛买5亿、爱沙尼亚买5亿，瑞士、比利时、拉脱维亚等国也纷纷下单购买。

根据媒体的说法，2022年光是标枪与海马斯火箭炮的军售就达到了280亿美元。

---

11月，私人军事公司、混蛋和一名伞兵打着收集伤亡人员的幌子，试图袭击乌克兰人。从那时起，就不可能收集到300和200了。

前线交换俘虏这类做法，在哈尔科夫反击攻势后就大量减少，现在已经几乎看不到了（主要原因是出现过几次俄军部队假扮换俘人员偷袭）。

在极为罕见的情况下，双方的逃兵会联合行动，进行抢劫活动或是试图脱逃，前线报告过几例类似的行为。

---

苏联红军老兵说：我们的领袖斯大林很了不起，他每天要去前线视察一次。

他在俄军服役的孙子面无表情地说：我们的总统普京更了不起，他根本不需要去前线，可前线每天都在向他靠近。

---

一名俄罗斯女兵泪诉在军中担任医疗工作，却根本沦为高级军官的“战地妻子”，即便正常工作时，也随时会觉得“好像有人坐在我身上”。

---

https://www.zhihu.com/question/560300904

如何评价一架满载弹药的俄军SU-34战斗机坠毁在俄国叶伊斯克市的居民楼上？

https://www.zhihu.com/question/561705498

如何评价一架俄军SU-30战斗机坠毁在俄国伊库尔茨克市的居民楼上，并造成两名飞行员死亡？
