---
layout: post
title:  各种压缩包的压缩和解压方法, awk&sed&grep, Linux学习心得（六）
category: linux 
---

* toc
{:toc}

# 各种压缩包的压缩和解压方法

## 安装

安装 7zip：

`sudo apt install p7zip`

安装 rar:

`sudo apt install rar unrar`

rar比较奇怪，压缩和解压是使用不同的包，这点和7zip是不一样的。

常按Win键，会弹出Unity所用的键盘快捷键。

## .tar.gz和.tgz

解压：`tar zxvf FileName.tar.gz`

压缩：`tar zcvf FileName.tar.gz DirName`

PS:tar命令对于长选项和短选项的顺序有要求，例如，不覆盖已有文件的选项`--skip-old-files`:

`tar --skip-old-files -zxvf FileName.tar.gz  #正确`

`tar -zxvf --skip-old-files FileName.tar.gz  #错误`

## .tar

解包：`tar xvf FileName.tar`

打包：`tar cvf FileName.tar DirName`

（注：tar是打包，不是压缩！）

## .gz

解压1：`gunzip FileName.gz`

解压2：`gzip -d FileName.gz`

压缩：`gzip FileName`

## .bz2

解压1：`bzip2 -d FileName.bz2`

解压2：`bunzip2 FileName.bz2`

压缩： `bzip2 -z FileName`

## .tar.bz2

解压：`tar jxvf FileName.tar.bz2`

压缩：`tar jcvf FileName.tar.bz2 DirName`

## .bz

解压1：`bzip2 -d FileName.bz`

解压2：`bunzip2 FileName.bz`

## .tar.bz

解压：`tar jxvf FileName.tar.bz`

## .tar.xz

解压：`tar xvJf FileName.tar.xz`

压缩：`tar cvJf FileName.tar.xz DirName`

## .Z

解压：`uncompress FileName.Z`

压缩：`compress FileName`

## .tar.z

解压：`tar Zxvf FileName.tar.z`

压缩：`tar Zcvf FileName.tar.z DirName`

## .zip

解压：`unzip FileName.zip`

压缩：`zip FileName.zip DirName`

## .rar

解压：`rar x FileName.rar`

压缩：`rar a FileName.rar DirName`

## .lha

解压：`lha -e FileName.lha`

压缩：`lha -a FileName.lha FileName`

## .rpm

解包：`rpm2cpio FileName.rpm | cpio -div`

## .deb

解包：`ar p FileName.deb data.Tar.gz | Tar zxf -`

## 万能脚本

解压：`sEx x FileName.*`

压缩：`sEx a FileName.* FileName`

sEx只是调用相关程序，本身并无压缩、解压功能，请注意！

sEx官网：

http://sourceforge.net/projects/sex

## 7zip

7-Zip是Igor Pavlov于1999年开发的压缩软件。

官网：

https://sparanoid.com/lab/7z/

它虽然支持多种压缩算法，但最重要的还是LZMA（Lempel-Ziv-Markov chain-Algorithm）算法。

该算法的SDK：

https://sparanoid.com/lab/7z/sdk.html

参考：

https://mp.weixin.qq.com/s/NB12KQOHjso9wH8Ju1ueSA

ZIP也能边下载边解压？流式解压技术揭秘！

## 参考

主流的压缩格式（zip、7z等）不支持保留Unix风格的文件访问权限，一旦在Linux系统里解压，解压出来的文件可能会出现“拒绝访问”的现象，而tar支持保留文件的访问权限。

https://www.zhihu.com/question/335911358

为什么Linux要用tar.gz，很少用7Z或ZIP？

---

https://mp.weixin.qq.com/s/9kdeSj0RwUvlIi4oBEF_Wg

速度与压缩比如何兼得？压缩算法在构建部署中的优化

# awk&sed&grep

这三个工具是文本处理中用的比较多的工具，各有各的特色，且都支持正则表达式。

一般来说，行处理优先考虑使用sed和grep，列处理优先考虑使用awk。通常情况下，组合使用多个命令，其命令编写的难度小于只使用一个命令。比如sed和grep也可以进行列处理，但语法难度远超awk，反之亦然。

这里不打算列出各个命令的选项，而仅列出使用它们的一些示例：

这里假设我们有一文件名为ab。

## awk

```bash
awk '{print $1}' ab #显示第一列
```

参考：

https://mp.weixin.qq.com/s/-mWYn195TBSB1lDlncuYeA

常用命令之awk常用实例

https://mp.weixin.qq.com/s/IXHKtRKd7Zl8iT9zd2ONsg

活跃了40年的AWK现在怎么样了？

AWK，1977年诞生于贝尔实验室。其名称来自其作者的名字缩写：Alfred Aho，Peter Weinberger和Brian Kernighan。

## sed

```bash
sed '1d' ab #删除第一行 
sed '$d' ab #删除最后一行
sed '1,2d' ab #删除第一行到第二行
sed '2,$d' ab #删除第二行到最后一行

sed -n '1p' ab    #显示第一行 
sed -n '$p' ab    #显示最后一行
sed -n '1,2p' ab  #显示第一行到第二行
sed -n '2,$p' ab  #显示第二行到最后一行

sed -n '/ruby/p' ab #查询包括关键字ruby所在所有行
sed -n '/\$/p' ab #查询包括关键字$所在所有行，使用反斜线\屏蔽特殊含义

sed -n '/ruby/p' ab | sed 's/ruby/bird/g'    #替换ruby为bird
sed -n '/ruby/p' ab | sed 's/ruby//g'        #删除ruby

sed -e 's/.$//' mydos.txt > myunix.txt #dos->unix
```

## grep

```bash
grep 'ruby' ab #查询包括关键字ruby所在所有行
grep -nri 'ruby' #n 显示行号，r 子目录搜索，i 忽略大小写
```

## 综合

```bash
ip addr show br-lan | grep 'inet ' | awk  '{print $2}' | sed 's/\/.*//g'
```

参考：

https://mp.weixin.qq.com/s/o1vuL3RrWz9tyUPguZeSWA

简单快捷的数据处理，数据科学需要注意的命令行

# Linux学习心得

https://zhuanlan.zhihu.com/p/424240082

编译一个属于自己的最小Linux系统

https://www.zhihu.com/question/66902460

为什么Linux下要把创建进程分为fork()和exec()(一系列函数)两个函数来处理?

https://zhuanlan.zhihu.com/p/464204319

Linux网络子系统中DMA机制的实现

https://mp.weixin.qq.com/s/1JiXL1f3SSjsBojlJSNOpQ

Linux的启动流程

https://mp.weixin.qq.com/s/ZfprFQjVANuCE2N693gZBQ

用户空间和内核空间

https://mp.weixin.qq.com/s/P14VsWwSh9jiF-jBHSXXOw

申请内存时底层发生了什么？

https://mp.weixin.qq.com/s/OJHQZjxa6u8aA6jZyJnNPg

一文浅析内存管理机制

https://mp.weixin.qq.com/s/lAN0GKjkfkkWCurwRQb6DQ

如何排查句柄泄露问题

https://mp.weixin.qq.com/s/9UmzFxRdE4FFdrqEeBZtOQ

如何实现一个定时器？

https://mp.weixin.qq.com/s/zVi45pZka_kPpKIoNXNVBA

当初我要是这么学习“进程和线程”就好了

https://mp.weixin.qq.com/s/A8TnhOFLQOhEqphE760yvw

15个相见恨晚的Linux神器，你可能一个都没见过

https://mp.weixin.qq.com/s/ejGjsGA1ijPP--j3BLcEFA

Linux并发与同步

https://mp.weixin.qq.com/s/CAPU8bjJWobQs6JHHMasvQ

Linux服务端最大并发数是多少？

http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html

Systemd入门教程：实战篇

https://mp.weixin.qq.com/s/bPqnaMqhi_4p1mwjmvyoIw

多图详解10大高性能开发核心技术

https://mp.weixin.qq.com/s/ESLO1RH6Q8udwI13Z2Pz_w

详解linux io flush

https://mp.weixin.qq.com/s/LLlzPB2emr9Hqr7gql0B4Q

为什么Linux需要Swapping

https://mp.weixin.qq.com/s/fzLcAkYwKhj-9hgoVkTzaw

CPU飙高，系统性能问题如何排查？

https://zhuanlan.zhihu.com/p/583413166

Linux I/O 神器之 io_uring

http://www.cppblog.com/elva/archive/2008/09/10/61544.html

关于SIGPIPE导致的程序退出

https://www.zhihu.com/question/475730584

为什么linux在x86上不需要设备树，在aarch64上需要设备树？

https://zhuanlan.zhihu.com/p/641619701

发现谁用kill -9关闭程序就开除！

# 俄乌战争+

我看最近不管是微博还是鹅站都有人在吹京子是个伟大的统帅，我寻思不表演一个以弱胜强就算了，恃强凌弱被弄的战报战线K线一个都支棱不起来你们是怎么好意思噶吹的？

---

乌萝东部团队发言人说鹅在索莱达的这次进攻有一部分瓦格纳穿着乌萝的衣服绑着乌萝的识别胶带浑水摸鱼。

当鹅宣自信的发了一段鹅英勇绕后拿下一个乌萝阵地的视频却被人问道那两名乌萝为什么在喊自己人后，鹅宣选择删除了视频。

---

白鹅版瓦格纳GardService可能作为志愿者加入对线。

---

一名俄罗斯女兵泪诉在军中担任医疗工作，却根本沦为高级军官的“战地妻子”，即便正常工作时，也随时会觉得“好像有人坐在我身上”。

---

https://www.zhihu.com/question/560300904

如何评价一架满载弹药的俄军SU-34战斗机坠毁在俄国叶伊斯克市的居民楼上？

https://www.zhihu.com/question/561705498

如何评价一架俄军SU-30战斗机坠毁在俄国伊库尔茨克市的居民楼上，并造成两名飞行员死亡？

---

今天，这一小撮希特勒式法西斯专政的头目，竟然装模作样地“纪念”战胜希特勒德国三十周年。他们利用苏联人民对伟大卫国战争光荣历史的自豪感，利用各国人民对苏联军民在反法西斯战争中作出的杰出功勋的尊敬心情，进行投机。

只要注意观察历史，就可以看到历史的车轮是怎样无情地驰过了一个个帝国的废墟。今天那些谋求霸权的超级大国，极端反动，又极端虚弱，极端狂妄，又极端孤立。可以预言，在各国人民联合反霸斗争的不断打击下，它们的下场，必将同希特勒的第三帝国一样，成为一堆历史的废墟。

https://zhuanlan.zhihu.com/p/628248670

纪念战胜德国法西斯三十周年——《人民日报》社论1975年5月9日

---

芬兰向美国雷神公司提出采购3.8亿美元的毒刺订单，科威特直接向雷神公司下单30亿美元毒刺订单，某蛙下单了11亿美元.....等等。

英国向雷神下单3亿美元的标枪订单，立陶宛向雷神下单1.25亿美元的标枪订单，巴西向雷神下单222套标枪订单金额未透露，但是应该也是数亿美元......等等。

海马斯火箭炮更不必多说，立陶宛买5亿、爱沙尼亚买5亿，瑞士、比利时、拉脱维亚等国也纷纷下单购买。

根据媒体的说法，2022年光是标枪与海马斯火箭炮的军售就达到了280亿美元。

---

11月，私人军事公司、混蛋和一名伞兵打着收集伤亡人员的幌子，试图袭击乌克兰人。从那时起，就不可能收集到300和200了。

前线交换俘虏这类做法，在哈尔科夫反击攻势后就大量减少，现在已经几乎看不到了（主要原因是出现过几次俄军部队假扮换俘人员偷袭）。

在极为罕见的情况下，双方的逃兵会联合行动，进行抢劫活动或是试图脱逃，前线报告过几例类似的行为。

---

苏联红军老兵说：我们的领袖斯大林很了不起，他每天要去前线视察一次。

他在俄军服役的孙子面无表情地说：我们的总统普京更了不起，他根本不需要去前线，可前线每天都在向他靠近。
